<!doctype html>
<html lang="ms" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Permainan Asid dan Alkali</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            height: 100%;
            width: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            box-sizing: border-box;
        }
        
        * {
            -webkit-tap-highlight-color: transparent;
        }
        
        .letter-box {
            width: 40px;
            height: 50px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 800;
            margin: 3px;
            background: white;
            transition: all 0.2s ease;
            text-transform: lowercase;
        }
        
        .letter-box.active {
            border-color: #3b82f6;
            background: #dbeafe;
            transform: scale(1.05);
        }
        
        .letter-box.correct {
            border-color: #22c55e;
            background: #dcfce7;
            color: #16a34a;
        }
        
        .letter-box.incorrect {
            border-color: #ef4444;
            background: #fee2e2;
            color: #dc2626;
        }
        
        .letter-box.space {
            background: transparent;
            border: none;
            width: 15px;
        }
        
        .answer-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 2px;
            margin: 20px 0;
        }
        
        /* Pure CSS Styling */
        .container {
            height: 100%;
            width: 100%;
            overflow: auto;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .content {
            min-height: 100%;
            padding: 24px 12px;
        }
        
        .max-width {
            max-width: 896px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 16px;
        }
        
        .main-title {
            color: white;
            font-size: 24px;
            font-weight: 800;
            margin-bottom: 8px;
        }
        
        @media (min-width: 768px) {
            .main-title {
                font-size: 36px;
            }
        }
        
        .instruction {
            color: white;
            font-size: 14px;
            margin-bottom: 12px;
        }
        
        @media (min-width: 768px) {
            .instruction {
                font-size: 18px;
            }
        }
        
        .lang-btn {
            background: white;
            font-size: 14px;
            font-weight: 700;
            padding: 8px 16px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border: none;
            cursor: pointer;
            color: #667eea;
        }
        
        .progress-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 16px;
            margin-bottom: 16px;
        }
        
        .progress-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .progress-label {
            font-size: 14px;
            font-weight: 600;
            color: #4b5563;
        }
        
        .progress-count {
            font-size: 18px;
            font-weight: 700;
            color: #667eea;
        }
        
        .progress-bar-bg {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 999px;
            overflow: hidden;
            margin-bottom: 12px;
        }
        
        .progress-bar-fill {
            height: 100%;
            border-radius: 999px;
            transition: all 0.5s;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 10%;
        }
        
        .timer-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .timer-label {
            font-size: 12px;
            font-weight: 600;
            color: #4b5563;
        }
        
        .timer-value {
            font-size: 16px;
            font-weight: 700;
            color: #667eea;
        }
        
        .question-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 16px;
            margin-bottom: 16px;
        }
        
        @media (min-width: 768px) {
            .question-card {
                padding: 24px;
            }
        }
        
        .category-title {
            font-size: 24px;
            font-weight: 800;
            margin-bottom: 16px;
            text-align: center;
            color: #ef4444;
        }
        
        @media (min-width: 768px) {
            .category-title {
                font-size: 32px;
            }
        }
        
        .question-text {
            font-size: 16px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 16px;
            text-align: center;
            line-height: 1.5;
        }
        
        @media (min-width: 768px) {
            .question-text {
                font-size: 18px;
            }
        }
        
        .reset-container {
            text-align: center;
            margin-top: 24px;
            margin-bottom: 32px;
        }
        
        .reset-btn {
            background: white;
            font-size: 16px;
            font-weight: 700;
            padding: 12px 32px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border: none;
            cursor: pointer;
            color: #667eea;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div id="app" class="container">
   <div class="content">
    <div class="max-width"><!-- Header -->
     <div class="header">
      <h1 id="mainTitle" class="main-title">üß™ Acid &amp; Alkali Game üß™</h1>
      <p id="instructionText" class="instruction">Type the correct answer for each question!</p><button id="langToggle" class="lang-btn"> üåê Bahasa Melayu </button>
     </div><!-- Progress -->
     <div class="progress-card">
      <div class="progress-header">
       <div class="progress-label" id="questionLabel">
        Question
       </div>
       <div id="progress" class="progress-count">
        1/10
       </div>
      </div>
      <div class="progress-bar-bg">
       <div id="progressBar" class="progress-bar-fill"></div>
      </div>
      <div class="timer-row">
       <div class="timer-label" id="timeLabel">
        ‚è±Ô∏è Time:
       </div>
       <div id="timer" class="timer-value">
        0s
       </div>
      </div>
     </div><!-- Question -->
     <div class="question-card">
      <div id="categoryTitle" class="category-title">
       üî¥ ACID
      </div>
      <div id="questionText" class="question-text"></div>
      <div id="answerRow" class="answer-row"></div>
     </div><!-- Reset Button -->
     <div class="reset-container"><button id="resetBtn" class="reset-btn"> üîÑ <span id="resetBtnText">Restart</span> </button>
     </div>
    </div>
   </div>
  </div>
  <script>
        const defaultConfig = {
            main_title: "üß™ Acid & Alkali Game üß™",
            instruction_text: "Type the correct answer for each question!",
            primary_color: "#667eea",
            secondary_color: "#ffffff"
        };

        const allQuestionsBM = [
            { id: 1, question: 'Asid ialah bahan kimia yang berasa __________________', answer: 'masam', category: 'ASID', color: '#ef4444', emoji: 'üî¥' },
            { id: 2, question: 'Asid bersifat __________________', answer: 'mengakis', category: 'ASID', color: '#ef4444', emoji: 'üî¥' },
            { id: 3, question: 'Asid menukarkan kertas litmus __________________', answer: 'biru menjadi merah', category: 'ASID', color: '#ef4444', emoji: 'üî¥' },
            { id: 4, question: 'Asid mempunyai nilai pH __________________', answer: 'kurang daripada 7', category: 'ASID', color: '#ef4444', emoji: 'üî¥' },
            { id: 5, question: 'Asid membebaskan gas __________________ apabila bertindak balas dengan logam', answer: 'hidrogen', category: 'ASID', color: '#ef4444', emoji: 'üî¥' },
            { id: 6, question: 'Alkali ialah bahan kimia yang berasa __________________', answer: 'pahit', category: 'ALKALI', color: '#3b82f6', emoji: 'üîµ' },
            { id: 7, question: 'Alkali bersifat __________________', answer: 'mengakis', category: 'ALKALI', color: '#3b82f6', emoji: 'üîµ' },
            { id: 8, question: 'Alkali menukarkan kertas litmus __________________', answer: 'merah menjadi biru', category: 'ALKALI', color: '#3b82f6', emoji: 'üîµ' },
            { id: 9, question: 'Alkali mempunyai nilai pH __________________', answer: 'lebih daripada 7', category: 'ALKALI', color: '#3b82f6', emoji: 'üîµ' },
            { id: 10, question: 'Alkali __________________ dengan logam', answer: 'tidak bertindak balas', category: 'ALKALI', color: '#3b82f6', emoji: 'üîµ' }
        ];

        const allQuestionsEN = [
            { id: 1, question: 'Acid is a chemical that tastes __________________', answer: 'sour', category: 'ACID', color: '#ef4444', emoji: 'üî¥' },
            { id: 2, question: 'Acid is __________________', answer: 'corrosive', category: 'ACID', color: '#ef4444', emoji: 'üî¥' },
            { id: 3, question: 'Acid turns litmus paper __________________', answer: 'blue to red', category: 'ACID', color: '#ef4444', emoji: 'üî¥' },
            { id: 4, question: 'Acid has a pH value __________________', answer: 'less than 7', category: 'ACID', color: '#ef4444', emoji: 'üî¥' },
            { id: 5, question: 'Acid releases __________________ gas when reacting with metal', answer: 'hydrogen', category: 'ACID', color: '#ef4444', emoji: 'üî¥' },
            { id: 6, question: 'Alkali is a chemical that tastes __________________', answer: 'bitter', category: 'ALKALI', color: '#3b82f6', emoji: 'üîµ' },
            { id: 7, question: 'Alkali is __________________', answer: 'corrosive', category: 'ALKALI', color: '#3b82f6', emoji: 'üîµ' },
            { id: 8, question: 'Alkali turns litmus paper __________________', answer: 'red to blue', category: 'ALKALI', color: '#3b82f6', emoji: 'üîµ' },
            { id: 9, question: 'Alkali has a pH value __________________', answer: 'more than 7', category: 'ALKALI', color: '#3b82f6', emoji: 'üîµ' },
            { id: 10, question: 'Alkali __________________ with metal', answer: 'does not react', category: 'ALKALI', color: '#3b82f6', emoji: 'üîµ' }
        ];

        let currentLanguage = 'EN';
        let allQuestions = allQuestionsEN;

        let gameState = {
            currentQuestionIndex: 0,
            totalTimeElapsed: 0,
            timerInterval: null,
            timerStarted: false,
            correctAnswers: 0
        };

        function toggleLanguage() {
            if (currentLanguage === 'EN') {
                currentLanguage = 'BM';
                allQuestions = allQuestionsBM;
                document.getElementById('langToggle').innerHTML = 'üåê English';
                document.getElementById('questionLabel').textContent = 'Soalan';
                document.getElementById('timeLabel').textContent = '‚è±Ô∏è Masa:';
                document.getElementById('resetBtnText').textContent = 'Mula Semula';
            } else {
                currentLanguage = 'EN';
                allQuestions = allQuestionsEN;
                document.getElementById('langToggle').innerHTML = 'üåê Bahasa Melayu';
                document.getElementById('questionLabel').textContent = 'Question';
                document.getElementById('timeLabel').textContent = '‚è±Ô∏è Time:';
                document.getElementById('resetBtnText').textContent = 'Restart';
            }
            initGame();
        }

        function initGame() {
            gameState = { 
                currentQuestionIndex: 0, 
                totalTimeElapsed: 0, 
                timerInterval: null, 
                timerStarted: false, 
                correctAnswers: 0 
            };
            updateProgress();
            showCurrentQuestion();
        }

        function startTimer() {
            if (gameState.timerStarted) return;
            
            gameState.timerStarted = true;
            
            if (gameState.timerInterval) {
                clearInterval(gameState.timerInterval);
            }
            
            gameState.totalTimeElapsed = 0;
            updateTimerDisplay();
            
            gameState.timerInterval = setInterval(() => {
                gameState.totalTimeElapsed++;
                updateTimerDisplay();
            }, 1000);
        }

        function updateTimerDisplay() {
            const timerElement = document.getElementById('timer');
            
            if (!gameState.timerStarted) {
                timerElement.textContent = '0s';
                timerElement.style.color = '#9ca3af';
            } else {
                timerElement.textContent = gameState.totalTimeElapsed + 's';
                
                if (gameState.totalTimeElapsed >= 180) {
                    timerElement.style.color = '#ef4444';
                } else if (gameState.totalTimeElapsed >= 120) {
                    timerElement.style.color = '#f59e0b';
                } else {
                    const primaryColor = window.elementSdk?.config?.primary_color || defaultConfig.primary_color;
                    timerElement.style.color = primaryColor;
                }
            }
        }

        function showCurrentQuestion() {
            const question = allQuestions[gameState.currentQuestionIndex];
            
            updateTimerDisplay();
            
            const categoryTitle = document.getElementById('categoryTitle');
            categoryTitle.textContent = `${question.emoji} ${question.category}`;
            categoryTitle.style.color = question.color;
            
            document.getElementById('questionText').textContent = question.question;
            
            const answerRow = document.getElementById('answerRow');
            answerRow.innerHTML = '';
            
            for (let i = 0; i < question.answer.length; i++) {
                const box = document.createElement('div');
                const char = question.answer[i];
                
                if (char === ' ') {
                    box.className = 'letter-box space';
                } else {
                    box.className = 'letter-box';
                    box.dataset.index = i;
                }
                
                answerRow.appendChild(box);
            }
            
            const firstBox = answerRow.querySelector('.letter-box:not(.space)');
            if (firstBox) firstBox.classList.add('active');
        }

        function handleKeyPress(key) {
            if (!gameState.timerStarted) {
                startTimer();
            }
            
            const boxes = document.querySelectorAll('#answerRow .letter-box:not(.space)');
            let activeBox = null;
            
            for (let box of boxes) {
                if (box.classList.contains('active')) {
                    activeBox = box;
                    break;
                }
            }
            
            if (!activeBox) {
                for (let box of boxes) {
                    if (!box.textContent) {
                        activeBox = box;
                        break;
                    }
                }
            }
            
            if (activeBox) {
                activeBox.textContent = key;
                activeBox.classList.remove('active', 'incorrect');
                
                const allBoxes = Array.from(document.querySelectorAll('#answerRow .letter-box'));
                const currentIndex = allBoxes.indexOf(activeBox);
                
                for (let i = currentIndex + 1; i < allBoxes.length; i++) {
                    if (!allBoxes[i].classList.contains('space') && !allBoxes[i].textContent) {
                        allBoxes[i].classList.add('active');
                        break;
                    }
                }
                
                checkAnswer();
            }
        }

        function handleBackspace() {
            const allBoxes = Array.from(document.querySelectorAll('#answerRow .letter-box'));
            const boxes = allBoxes.filter(box => !box.classList.contains('space'));
            
            let activeIndex = -1;
            for (let i = 0; i < boxes.length; i++) {
                if (boxes[i].classList.contains('active')) {
                    activeIndex = i;
                    break;
                }
            }
            
            if (activeIndex !== -1) {
                const activeBox = boxes[activeIndex];
                
                if (activeBox.textContent && activeBox.textContent.trim() !== '') {
                    activeBox.textContent = '';
                    activeBox.classList.remove('incorrect');
                } else {
                    if (activeIndex > 0) {
                        activeBox.classList.remove('active');
                        const prevBox = boxes[activeIndex - 1];
                        prevBox.classList.add('active');
                        prevBox.textContent = '';
                        prevBox.classList.remove('incorrect');
                    }
                }
            } else {
                for (let i = boxes.length - 1; i >= 0; i--) {
                    if (boxes[i].textContent && boxes[i].textContent.trim() !== '') {
                        boxes[i].textContent = '';
                        boxes[i].classList.add('active');
                        boxes[i].classList.remove('incorrect');
                        break;
                    }
                }
            }
        }

        function checkAnswer() {
            const question = allQuestions[gameState.currentQuestionIndex];
            const allBoxes = Array.from(document.querySelectorAll('#answerRow .letter-box'));
            
            let userAnswer = '';
            let allFilled = true;
            
            allBoxes.forEach(box => {
                if (box.classList.contains('space')) {
                    userAnswer += ' ';
                } else {
                    userAnswer += box.textContent || '';
                    if (!box.textContent) allFilled = false;
                }
            });
            
            if (allFilled) {
                const normalizedUser = userAnswer.trim().toLowerCase().replace(/\s+/g, ' ');
                const normalizedCorrect = question.answer.trim().toLowerCase().replace(/\s+/g, ' ');
                
                if (normalizedUser === normalizedCorrect) {
                    gameState.correctAnswers++;
                    
                    allBoxes.forEach(box => {
                        if (!box.classList.contains('space')) {
                            box.classList.remove('active', 'incorrect');
                            box.classList.add('correct');
                        }
                    });
                    
                    setTimeout(() => {
                        gameState.currentQuestionIndex++;
                        updateProgress();
                        
                        if (gameState.currentQuestionIndex >= allQuestions.length) {
                            if (gameState.timerInterval) {
                                clearInterval(gameState.timerInterval);
                            }
                            showVictoryMessage();
                        } else {
                            showCurrentQuestion();
                        }
                    }, 1000);
                } else {
                    let answerIndex = 0;
                    allBoxes.forEach(box => {
                        if (!box.classList.contains('space')) {
                            box.textContent = question.answer[answerIndex];
                            box.classList.remove('active');
                            box.classList.add('incorrect');
                        }
                        answerIndex++;
                    });
                    
                    const questionText = document.getElementById('questionText');
                    const originalText = questionText.textContent;
                    const correctLabel = currentLanguage === 'BM' ? 'Jawapan Betul:' : 'Correct Answer:';
                    questionText.innerHTML = `<span style="color: #ef4444; font-weight: 800;">‚ùå ${correctLabel} ${question.answer}</span>`;
                    
                    setTimeout(() => {
                        questionText.textContent = originalText;
                        gameState.currentQuestionIndex++;
                        updateProgress();
                        
                        if (gameState.currentQuestionIndex >= allQuestions.length) {
                            if (gameState.timerInterval) {
                                clearInterval(gameState.timerInterval);
                            }
                            showVictoryMessage();
                        } else {
                            showCurrentQuestion();
                        }
                    }, 3000);
                }
            }
        }

        function showVictoryMessage() {
            if (gameState.timerInterval) {
                clearInterval(gameState.timerInterval);
            }
            
            const totalTime = gameState.totalTimeElapsed;
            const minutes = Math.floor(totalTime / 60);
            const seconds = totalTime % 60;
            const timeDisplay = minutes > 0 ? `${minutes}m ${seconds}s` : `${seconds}s`;
            
            const correctCount = gameState.correctAnswers;
            const wrongCount = 10 - correctCount;
            
            let motivationMessage = '';
            let emoji = '';
            let correctLabel = '';
            let wrongLabel = '';
            let timeLabel = '';
            let playAgainBtn = '';
            
            if (currentLanguage === 'BM') {
                if (correctCount === 10) {
                    emoji = 'üèÜ';
                    motivationMessage = 'SEMPURNA! Anda seorang genius! 100% betul!';
                } else if (correctCount >= 8) {
                    emoji = 'üåü';
                    motivationMessage = 'Hebat sekali! Prestasi yang cemerlang!';
                } else if (correctCount >= 6) {
                    emoji = 'üëç';
                    motivationMessage = 'Bagus! Teruskan usaha anda!';
                } else if (correctCount >= 4) {
                    emoji = 'üí™';
                    motivationMessage = 'Boleh buat! Cuba lagi untuk skor lebih tinggi!';
                } else {
                    emoji = 'üìö';
                    motivationMessage = 'Jangan putus asa! Belajar lagi dan cuba sekali lagi!';
                }
                correctLabel = 'Betul';
                wrongLabel = 'Salah';
                timeLabel = 'Masa';
                playAgainBtn = 'üîÑ Main Lagi';
            } else {
                if (correctCount === 10) {
                    emoji = 'üèÜ';
                    motivationMessage = 'PERFECT! You are a genius! 100% correct!';
                } else if (correctCount >= 8) {
                    emoji = 'üåü';
                    motivationMessage = 'Excellent! Outstanding performance!';
                } else if (correctCount >= 6) {
                    emoji = 'üëç';
                    motivationMessage = 'Good! Keep up the effort!';
                } else if (correctCount >= 4) {
                    emoji = 'üí™';
                    motivationMessage = 'You can do it! Try again for a higher score!';
                } else {
                    emoji = 'üìö';
                    motivationMessage = 'Don\'t give up! Study more and try again!';
                }
                correctLabel = 'Correct';
                wrongLabel = 'Wrong';
                timeLabel = 'Time';
                playAgainBtn = 'üîÑ Play Again';
            }
            
            const overlay = document.createElement('div');
            overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 1000; padding: 20px;';
            
            const message = document.createElement('div');
            message.style.cssText = 'background: white; padding: 32px 24px; border-radius: 24px; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.3); max-width: 500px; width: 100%;';
            message.innerHTML = `
                <div style="font-size: 64px; margin-bottom: 16px;">${emoji}</div>
                <div style="font-size: 22px; font-weight: 800; color: #667eea; margin-bottom: 24px; line-height: 1.3;">${motivationMessage}</div>
                <div style="display: flex; justify-content: center; gap: 16px; margin-bottom: 16px; flex-wrap: wrap;">
                    <div style="background: #dcfce7; padding: 16px 24px; border-radius: 12px; min-width: 100px;">
                        <div style="font-size: 12px; color: #16a34a; font-weight: 600; margin-bottom: 4px;">${correctLabel}</div>
                        <div style="font-size: 28px; font-weight: 800; color: #16a34a;">‚úì ${correctCount}</div>
                    </div>
                    <div style="background: #fee2e2; padding: 16px 24px; border-radius: 12px; min-width: 100px;">
                        <div style="font-size: 12px; color: #dc2626; font-weight: 600; margin-bottom: 4px;">${wrongLabel}</div>
                        <div style="font-size: 28px; font-weight: 800; color: #dc2626;">‚úó ${wrongCount}</div>
                    </div>
                </div>
                <div style="font-size: 16px; color: #6b7280; margin-bottom: 24px;">‚è±Ô∏è ${timeLabel}: ${timeDisplay}</div>
                <button onclick="this.parentElement.parentElement.remove(); initGame();" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-size: 16px; font-weight: 700; padding: 14px 40px; border-radius: 16px; border: none; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">${playAgainBtn}</button>
            `;
            
            overlay.appendChild(message);
            document.body.appendChild(overlay);
        }

        function updateProgress() {
            const currentQuestion = gameState.currentQuestionIndex + 1;
            document.getElementById('progress').textContent = `${currentQuestion}/10`;
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = `${(currentQuestion / 10) * 100}%`;
        }

        async function onConfigChange(config) {
            const mainTitle = document.getElementById('mainTitle');
            const instructionText = document.getElementById('instructionText');
            const resetBtn = document.getElementById('resetBtn');
            
            mainTitle.textContent = config.main_title || defaultConfig.main_title;
            instructionText.textContent = config.instruction_text || defaultConfig.instruction_text;
            
            const primaryColor = config.primary_color || defaultConfig.primary_color;
            const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
            
            document.getElementById('app').style.background = `linear-gradient(135deg, ${primaryColor} 0%, #764ba2 100%)`;
            resetBtn.style.background = secondaryColor;
            resetBtn.style.color = primaryColor;
            
            const langToggle = document.getElementById('langToggle');
            if (langToggle) {
                langToggle.style.color = primaryColor;
            }
            
            const progressBar = document.getElementById('progressBar');
            if (progressBar) {
                progressBar.style.background = `linear-gradient(135deg, ${primaryColor} 0%, #764ba2 100%)`;
            }
            
            const progressText = document.getElementById('progress');
            if (progressText) {
                progressText.style.color = primaryColor;
            }
        }

        document.getElementById('resetBtn').addEventListener('click', () => {
            initGame();
        });

        document.getElementById('langToggle').addEventListener('click', () => {
            toggleLanguage();
        });

        document.addEventListener('keydown', (e) => {
            if (e.key >= 'a' && e.key <= 'z') {
                handleKeyPress(e.key);
            } else if (e.key >= '0' && e.key <= '9') {
                handleKeyPress(e.key);
            } else if (e.key === ' ') {
                e.preventDefault();
                handleKeyPress(' ');
            } else if (e.key === 'Backspace') {
                e.preventDefault();
                handleBackspace();
            }
        });

        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange,
                mapToCapabilities: (config) => ({
                    recolorables: [
                        {
                            get: () => config.primary_color || defaultConfig.primary_color,
                            set: (value) => {
                                config.primary_color = value;
                                window.elementSdk.setConfig({ primary_color: value });
                            }
                        },
                        {
                            get: () => config.secondary_color || defaultConfig.secondary_color,
                            set: (value) => {
                                config.secondary_color = value;
                                window.elementSdk.setConfig({ secondary_color: value });
                            }
                        }
                    ],
                    borderables: [],
                    fontEditable: undefined,
                    fontSizeable: undefined
                }),
                mapToEditPanelValues: (config) => new Map([
                    ['main_title', config.main_title || defaultConfig.main_title],
                    ['instruction_text', config.instruction_text || defaultConfig.instruction_text]
                ])
            });
        }

        initGame();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b254002d5de8b74',t:'MTc2NjQ2NTU1Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
